apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.storeName }}-pg-secret
  labels:
    {{- include "medusajs.labels" . | nindent 4 }}
type: Opaque
stringData:
  POSTGRES_DB: {{ .Values.postgres.database | quote }}
  POSTGRES_USER: {{ .Values.postgres.user | quote }}
  POSTGRES_PASSWORD: {{ .Values.postgres.password | quote }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.storeName }}-medusa-secret
  labels:
    {{- include "medusajs.labels" . | nindent 4 }}
type: Opaque
stringData:
  DATABASE_URL: "postgres://{{ .Values.postgres.user }}:{{ .Values.postgres.password }}@{{ .Values.storeName }}-postgres:5432/{{ .Values.postgres.database }}"
  REDIS_URL: "redis://{{ .Values.storeName }}-redis:6379"
  JWT_SECRET: {{ .Values.medusa.jwtSecret | default (randAlphaNum 32) | quote }}
  COOKIE_SECRET: {{ .Values.medusa.cookieSecret | default (randAlphaNum 32) | quote }}
  MEDUSA_ADMIN_EMAIL: {{ .Values.medusa.adminEmail | quote }}
  MEDUSA_ADMIN_PASSWORD: {{ .Values.medusa.adminPassword | quote }}
