apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.storeName }}-postgres-secret
  labels:
    {{- include "medusa.labels" . | nindent 4 }}
type: Opaque
stringData:
  POSTGRES_DB: {{ .Values.postgres.database | quote }}
  POSTGRES_USER: {{ .Values.postgres.user | quote }}
  POSTGRES_PASSWORD: {{ .Values.postgres.password | quote }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.storeName }}-medusa-secret
  labels:
    {{- include "medusa.labels" . | nindent 4 }}
type: Opaque
stringData:
  DATABASE_URL: "postgres://{{ .Values.postgres.user }}:{{ .Values.postgres.password }}@{{ .Values.storeName }}-postgres:5432/{{ .Values.postgres.database }}"
  REDIS_URL: "redis://{{ .Values.storeName }}-redis:6379"
  JWT_SECRET: {{ .Values.medusa.jwtSecret | quote }}
  COOKIE_SECRET: {{ .Values.medusa.cookieSecret | quote }}
  ADMIN_EMAIL: {{ .Values.medusa.adminEmail | quote }}
  ADMIN_PASSWORD: {{ .Values.medusa.adminPassword | quote }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.storeName }}-storefront-secret
  labels:
    {{- include "medusa.labels" . | nindent 4 }}
type: Opaque
stringData:
  NEXT_PUBLIC_MEDUSA_BACKEND_URL: "http://{{ .Values.storeName }}-medusa:9000"
  MEDUSA_BACKEND_URL: "http://{{ .Values.storeName }}-medusa:9000"
